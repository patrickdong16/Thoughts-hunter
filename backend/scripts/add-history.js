// 添加历史数据到Railway数据库
const https = require('https');

const API_BASE = 'https://thoughts-radar-backend-production.up.railway.app';

const historyData = [
  // 2026-01-20
  {
    date: '2026-01-20',
    freq: 'T2',
    stance: 'A',
    title: '开源AI的民主化潜力：为什么自由软件运动现在比以往更重要',
    author_name: 'Cory Doctorow',
    author_avatar: 'CD',
    author_bio: '科幻作家，电子前沿基金会特别顾问，《小弟弟》《攻击面》作者，数字权利活动家',
    source: '2026年1月19日 · Pluralistic博客 · 深度长文分析开源AI的政治经济学',
    content: `Doctorow在这篇万字长文中提出了一个关键论点：在AI时代，开源不仅仅是一种技术选择，更是一种政治抉择。当AI能力被少数公司垄断时，开源成为唯一能够阻止「认知封建制」形成的力量。他追溯了自由软件运动的历史，指出Richard Stallman在1980年代的洞见今天更加紧迫：如果你不控制你使用的软件，软件就会控制你。

Doctorow详细分析了闭源AI模型的政治经济学。当一个AI系统的训练数据、算法架构、微调过程都是商业机密时，用户实际上是在使用一个黑箱。你不知道它的偏见是什么，不知道它为什么做出特定的回答，也不知道它在什么情况下会失败。这种不透明性赋予了AI公司巨大的权力：他们可以单方面改变系统的行为，用户别无选择只能接受。

更根本的问题是创新的方向。闭源公司的利润动机决定了他们会优先开发那些能够提取价值的功能，而不是那些真正有益于用户的功能。开源社区则创造了一个不同的激励结构：贡献者关心的是解决真实问题，而不是最大化用户参与度或广告收入。Doctorow呼吁政策支持开源AI发展，包括公共资金资助开源项目、政府采购优先使用开源方案、以及建立AI模型的公共基础设施。`,
    tension_q: '开源vs闭源，哪个更能推动技术进步？',
    tension_a: '开源协作',
    tension_b: '闭源竞争',
    keywords: ['开源AI', '自由软件', '数字权利', 'Doctorow']
  },
  {
    date: '2026-01-20',
    freq: 'P3',
    stance: 'A',
    title: '碳预算的政治经济学：为什么气候紧急状态需要计划经济思维',
    author_name: 'Kate Aronoff',
    author_avatar: 'KA',
    author_bio: '《新共和》杂志气候记者，《压倒胜利》作者，关注气候变化与政治经济的交叉领域',
    source: '2026年1月18日 · 《新共和》杂志 · 基于IPCC最新报告的政策分析',
    content: `Aronoff在这篇文章中提出了一个在主流话语中被回避的问题：如果我们认真对待气候科学，市场机制是否足以应对？她的答案是否定的。IPCC的碳预算概念意味着一个硬性的物理限制——如果要控制升温在1.5°C以内，人类只能再排放有限数量的二氧化碳。这不是一个可以通过价格信号「逐步优化」的问题，而是一个需要有计划地分配和减少的问题。

Aronoff详细分析了碳市场的局限性。理论上，碳税或碳交易可以通过价格机制引导排放减少。但实践中，碳价从来没有高到足以改变行为——政治压力使得任何「足够高」的碳价都无法通过。更根本的问题是时间：市场机制的效率依赖于无数次试错和调整，但我们没有几十年来慢慢调整的奢侈。碳预算意味着一个硬性的截止日期。

Aronoff并不是在呼吁全面的计划经济，而是指出某些领域——电力系统、交通基础设施、建筑标准——需要直接的公共规划和投资，而不能等待市场信号。她以二战期间的战时动员为类比：当面临生存性威胁时，政府能够在几年内重组整个工业体系。气候变化是一个类似的威胁，需要类似的响应。`,
    tension_q: '气候政策vs经济增长',
    tension_a: '优先气候',
    tension_b: '优先增长',
    keywords: ['碳预算', '气候紧急', '计划经济', 'IPCC']
  },
  {
    date: '2026-01-20',
    freq: 'Φ2',
    stance: 'A',
    title: '意识的物理主义解释：为什么我们不需要神秘主义来理解心智',
    author_name: 'Patricia Churchland',
    author_avatar: 'PC',
    author_bio: '加州大学圣地亚哥分校荣休教授，神经哲学创始人之一，《触碰神经》《大脑信任》作者',
    source: '2026年1月 · Journal of Consciousness Studies · 回应David Chalmers「困难问题」的最新论文',
    content: `Churchland在这篇技术性论文中系统性地挑战了意识研究中的「困难问题」框架。David Chalmers在1995年提出，即使我们完全解释了大脑的功能运作，仍然存在一个「困难问题」：为什么会有主观体验？为什么处理信息的同时会「有感觉像是什么」？Churchland认为这个问题的提法本身就是误导性的。

Churchland的论证分为三个层次。首先是历史类比：在科学史上，对于生命、遗传、化学反应，人们曾经认为存在类似的「困难问题」——似乎物理解释永远无法捕捉生命的「本质」或者意识的「内在性质」。但随着科学进步，这些问题被证明是伪问题，源于对现象的不完整理解而非真正的本体论鸿沟。其次是认知论证：我们对意识的「直觉」是进化的产物，不一定反映现实的结构。最后是实证进展：神经科学已经开始解释许多曾被认为「无法解释」的现象。

Churchland并不否认意识是真实的和重要的。她反对的是将意识「神秘化」——设置一个原则上无法跨越的解释鸿沟。这种神秘化不仅在科学上是不必要的，在伦理上也是危险的，因为它可能被用来为二元论意识形态背书。`,
    tension_q: '意识的本质是什么？',
    tension_a: '物理现象',
    tension_b: '超物理存在',
    keywords: ['意识', '物理主义', '困难问题', '神经哲学']
  },
  // 2026-01-19
  {
    date: '2026-01-19',
    freq: 'T3',
    stance: 'A',
    title: '反垄断的新边疆：为什么拆分科技巨头是经济民主的必要条件',
    author_name: 'Lina Khan',
    author_avatar: 'LK',
    author_bio: '联邦贸易委员会主席，《亚马逊的反垄断悖论》作者，新布兰代斯学派代表人物',
    source: '2026年1月17日 · 《耶鲁法学评论》 · 任期内首次系统阐述监管哲学的学术论文',
    content: `Khan在这篇论文中回应了对她反垄断理念的批评。传统的反垄断框架聚焦于「消费者福利」——只要价格没有上涨，合并就不是问题。但Khan认为这个框架对数字时代是不够的。科技平台的权力不仅体现在定价上，更体现在它们对市场结构、信息流动、甚至民主话语的控制上。

Khan详细分析了平台权力的多维性。亚马逊可以利用其平台地位获取第三方卖家的数据，然后推出自有品牌产品与之竞争。Google可以通过搜索排名决定哪些网站能被看见，哪些会消失。Meta可以通过收购Instagram和WhatsApp消灭潜在的竞争对手。这些行为可能不会直接提高消费者价格，但它们确实在破坏市场的竞争结构。

Khan呼吁回到反垄断法的本意——不仅仅是保护消费者，更是保护竞争本身，保护经济权力的分散。她引用了最高法院1958年的判词：「垄断权力的集中本身就是一种伤害，即使这种权力暂时没有被滥用。」现代科技巨头的权力集中程度是历史上前所未见的，需要结构性的回应。`,
    tension_q: '技术巨头应该被拆分吗？',
    tension_a: '必须拆分',
    tension_b: '保持现状',
    keywords: ['反垄断', '科技监管', 'Lina Khan', '平台权力']
  },
  {
    date: '2026-01-19',
    freq: 'P1',
    stance: 'B',
    title: '去全球化的隐性成本：供应链重组的赢家与输家',
    author_name: 'Adam Tooze',
    author_avatar: 'AT',
    author_bio: '哥伦比亚大学历史学教授，《崩盘》《关机》作者，当代最具影响力的经济史学家之一',
    source: '2026年1月16日 · Chartbook Substack · 基于最新贸易数据的深度分析',
    content: `Tooze在这篇分析中对当前的「去全球化」叙事提出了质疑。确实，地缘政治紧张导致了供应链的重新配置，「友岸外包」和「近岸外包」成为了商业术语。但Tooze通过数据显示，全球贸易总量实际上并没有下降——它只是在重新路由。中国对美国的直接出口减少了，但中国对越南、墨西哥的出口增加了，然后这些国家对美国的出口也增加了。

Tooze分析了这种重组的赢家和输家。赢家包括那些成为供应链中转站的国家——越南、墨西哥、印度的部分地区。输家包括那些既不是大市场也不是中转站的小型经济体，以及那些依赖高效全球供应链的低利润行业。更隐性的输家是消费者——供应链的冗余化和分散化必然意味着更高的成本，这些成本最终会转嫁到价格上。

Tooze的结论是：我们正在经历的不是全球化的终结，而是全球化的一次昂贵的重新配置。这种重新配置是由政治逻辑而非经济逻辑驱动的，因此它不会带来效率的提升，只会带来韧性的某种增加——以及确定无疑的成本增加。问题是这些成本由谁承担。`,
    tension_q: '全球化是否应该继续？',
    tension_a: '深化合作',
    tension_b: '回归本土',
    keywords: ['去全球化', '供应链', 'Adam Tooze', '友岸外包']
  },
  {
    date: '2026-01-19',
    freq: 'H2',
    stance: 'B',
    title: '超越文明冲突：后亨廷顿时代的国际关系分析',
    author_name: 'Pankaj Mishra',
    author_avatar: 'PM',
    author_bio: '评论家与历史学家，《愤怒的时代》《从帝国废墟中》作者，后殖民批评的代表声音',
    source: '2026年1月15日 · 《伦敦书评》 · 亨廷顿《文明的冲突》发表三十年后的重新评估',
    content: `Mishra在这篇长文中对亨廷顿的「文明冲突」理论进行了系统性的批判。他指出，这个理论的吸引力恰恰在于它的简单性——它把复杂的历史过程简化为几个「文明圈」之间的本质性冲突。但这种简化是危险的，因为它把「文明」当作固定的实体，忽视了内部的多样性和历史的变动性。

Mishra追溯了伊斯兰世界的历史，指出「西方vs伊斯兰」的叙事掩盖了一个更复杂的真相：现代伊斯兰运动在很大程度上是对西方现代性的一种回应，而不是「传统」的延续。更讽刺的是，许多「伊斯兰主义」思想家——如赛义德·库特布——是在西方接受教育的，他们的思想框架借鉴了西方反启蒙传统的要素。同样，所谓「西方文明」的边界也是模糊的——俄罗斯属于「西方」吗？东正教呢？

Mishra认为，更有解释力的框架不是「文明」，而是「现代化的不均衡性」。全球所有社会都在经历现代化的冲击，但以不同的速度、不同的方式、承受不同的成本。冲突不是因为文明的「本质」不同，而是因为现代化过程产生的失落、怨恨和地位焦虑。理解这一点，才能找到化解冲突的真正路径。`,
    tension_q: '文明冲突论是否成立？',
    tension_a: '文明必然冲突',
    tension_b: '文明可以融合',
    keywords: ['文明冲突', '亨廷顿', '后殖民', '现代化']
  }
];

async function postData(item) {
  return new Promise((resolve, reject) => {
    const data = JSON.stringify(item);
    const options = {
      hostname: 'thoughts-radar-backend-production.up.railway.app',
      path: '/api/radar',
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Content-Length': Buffer.byteLength(data)
      }
    };

    const req = https.request(options, (res) => {
      let body = '';
      res.on('data', chunk => body += chunk);
      res.on('end', () => {
        console.log(`${item.date} ${item.freq}: ${res.statusCode} - ${body.substring(0, 100)}`);
        resolve(body);
      });
    });

    req.on('error', reject);
    req.write(data);
    req.end();
  });
}

async function main() {
  console.log('Adding history data to Railway...');
  for (const item of historyData) {
    await postData(item);
    await new Promise(r => setTimeout(r, 500)); // 间隔500ms
  }
  console.log('Done!');
}

main();
