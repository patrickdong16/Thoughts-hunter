# æ€æƒ³é›·è¾¾ - é¡¹ç›®è§„åˆ™

> æœ¬æ–‡ä»¶è¡¥å……å…¨å±€è§„åˆ™ï¼Œä»…å¯¹æ€æƒ³é›·è¾¾é¡¹ç›®ç”Ÿæ•ˆ
> **Claude å¿…é¡»ä¸¥æ ¼éµå®ˆï¼Œè¿åå³åœæ­¢**

---

## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§ï¼šå†…å®¹çœŸå®æ€§

### ç»å¯¹ç¦æ­¢ï¼ˆé›¶å®¹å¿ï¼‰
1. **ç¦æ­¢è™šæ„ä»»ä½•å†…å®¹**
   - ç¦æ­¢è™šæ„ URLï¼ˆå¿…é¡»æ˜¯çœŸå®å¯è®¿é—®çš„é“¾æ¥ï¼‰
   - ç¦æ­¢è™šæ„æ¼”è®²/å‘è¨€ï¼ˆå¿…é¡»æ˜¯çœŸå®å‘ç”Ÿçš„ï¼‰
   - ç¦æ­¢è™šæ„å¼•ç”¨ï¼ˆå¿…é¡»æ¥è‡ªçœŸå®æ¥æºï¼‰
   - ç¦æ­¢è™šæ„ä½œè€…/äººç‰©è¨€è®º
   - ç¦æ­¢è™šæ„æ—¥æœŸ/äº‹ä»¶

2. **å¦‚æœæ²¡æœ‰çœŸå®æ¥æºï¼Œå¿…é¡»åœæ­¢**
   - ä¸è¦ç¼–é€ "å¯èƒ½è¯´çš„è¯"
   - ä¸è¦æ ¹æ®äººç‰©ç«‹åœºæ¨æµ‹å†…å®¹
   - æ²¡æœ‰çœŸå® URL = ä¸èƒ½å‘å¸ƒ

### è¿ååæœ
- ç«‹å³åœæ­¢ç”Ÿæˆ
- å‘ŠçŸ¥ç”¨æˆ·æ— æ³•æ‰¾åˆ°çœŸå®æ¥æº
- å»ºè®®ç”¨æˆ·æä¾›çœŸå®æ¥æºæˆ–æ›´æ¢ä¸»é¢˜

---

## ğŸš« Railway é…ç½®ç¦åŒºï¼ˆ2026-01-27 å¤ç›˜æ–°å¢ï¼‰

### cronSchedule é™·é˜±ï¼ˆå¼ºåˆ¶éµå®ˆï¼‰
- **ç¦æ­¢**åœ¨ Web Service çš„ `railway.json` ä¸­æ·»åŠ  `cronSchedule`
- åŸå› ï¼š`cronSchedule` ä¼šå°†æœåŠ¡ä»æŒç»­è¿è¡Œçš„ Web Service å˜ä¸ºä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡ï¼Œå¯¼è‡´ 502 é”™è¯¯
- å¦‚éœ€å®šæ—¶ä»»åŠ¡ï¼šåˆ›å»ºç‹¬ç«‹çš„ Cron Serviceï¼Œä¸ Web Service åˆ†ç¦»

### æ­£ç¡®çš„å®šæ—¶ä»»åŠ¡æ–¹æ¡ˆ
1. ä½¿ç”¨ Railway ç‹¬ç«‹çš„ Cron Serviceï¼ˆä¸ Web Service åˆ†å¼€éƒ¨ç½²ï¼‰
2. æˆ–ä½¿ç”¨å¤–éƒ¨è°ƒåº¦æœåŠ¡ï¼ˆå¦‚ GitHub Actionsï¼‰è§¦å‘ API

---

## ğŸ“‹ éœ€æ±‚æ¥æº

**å”¯ä¸€éœ€æ±‚æº**ï¼š`REQUIREMENTS.md`

---

## âœ… å†…å®¹è´¨æ£€è§„åˆ™

### å­—æ•°è¦æ±‚
- æ­£æ–‡ **â‰¥ 500 å­—ç¬¦**

### é›¶é‡å¤è§„åˆ™
- **URL å”¯ä¸€**ï¼šåŒä¸€ URL ä¸èƒ½å‡ºç°ä¸¤æ¬¡
- **è§†é¢‘ID å”¯ä¸€**ï¼šåŒä¸€ YouTube è§†é¢‘ä¸èƒ½é‡å¤
- **æ ‡é¢˜å»é‡**ï¼šç›¸ä¼¼åº¦ â‰¥ 80% å¿…é¡»é˜»æ–­

### é¢‘æ®µåŒ¹é…
- å†…å®¹å¿…é¡»ä¸é€‰æ‹©çš„é¢‘æ®µç›¸å…³
- ç«‹åœºï¼ˆA/Bï¼‰å¿…é¡»ä¸å†…å®¹å®é™…è§‚ç‚¹ä¸€è‡´

---

## ğŸ“… æ¯æ—¥å†…å®¹ç”Ÿæˆæµç¨‹ v2.0ï¼ˆå¼ºåˆ¶ï¼‰

> **æ ¸å¿ƒåŸåˆ™**ï¼šä»¥äººä¸ºæœ¬ â€” æ€æƒ³è·Ÿè¸ªä½“ç³»é©±åŠ¨é‡‡é›†ï¼Œéå¹³å°é©±åŠ¨

### é‡‡é›†ä¼˜å…ˆçº§ä½“ç³»

| ä¼˜å…ˆçº§ | æ¥æº | æ¸ é“ | è¯´æ˜ |
|--------|------|------|------|
| **P0** | è·Ÿè¸ªåå•å†…äººç‰© | RSS/åšå®¢/Google | æœ€é«˜ä¼˜å…ˆçº§ |
| **P1** | åŒçº§åˆ«æ€æƒ³è€… | RSS/åšå®¢/Google | è¡¥å……å±‚ |
| **P2** | YouTube è§†é¢‘ | è·Ÿè¸ªé¢‘é“ä¼˜å…ˆ | è§†é¢‘è¡¥å…… |

### æ™®é€šæ—¥é…é¢ï¼ˆå¼ºåˆ¶ï¼‰

| é…é¢é¡¹ | è¦æ±‚ |
|--------|------|
| éè§†é¢‘ï¼ˆRSS/åšå®¢ï¼‰ | **5-7 æ¡** |
| è§†é¢‘ï¼ˆYouTubeï¼‰ | **â‰¥1 æ¡** |
| é¢‘æ®µè¦†ç›– | **T1/P1/H1/Î¦1/F1/R1 å„â‰¥1** |

### ä¸»é¢˜æ—¥é…é¢ï¼ˆçµæ´»ï¼‰

| é…é¢é¡¹ | è¦æ±‚ |
|--------|------|
| æ€»æ•°é‡ | 10-20 æ¡ |
| å†…å®¹ç±»å‹ | **ä¸é™** |
| é¢‘æ®µè¦†ç›– | **å°½é‡æ¶‰çŒ** |

### æ­¥éª¤ 1ï¼šP0 - æ€æƒ³é¢†è¢– RSS/åšå®¢é‡‡é›†
```bash
# æ‰«æè·Ÿè¸ªåå•å†…äººç‰©çš„æœ€æ–°å‘å¸ƒ
curl -X POST https://thoughts-radar-backend-production.up.railway.app/api/automation/generate-from-leaders
```

### æ­¥éª¤ 2ï¼šé…é¢æ£€æŸ¥
```bash
# æ£€æŸ¥éè§†é¢‘/è§†é¢‘é…é¢å’Œé¢‘æ®µè¦†ç›–
curl https://thoughts-radar-backend-production.up.railway.app/api/automation/content-gap
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "stats": {
    "nonVideo": { "count": 5, "min": 5, "gap": 0 },
    "video": { "count": 0, "min": 1, "gap": 1 },
    "frequency": { "missing": ["R1"], "gap": 1 }
  }
}
```

### æ­¥éª¤ 3ï¼šP2 - YouTube è§†é¢‘æ‰«æä¸é‡‡é›† ğŸ†•
```bash
# æ­¥éª¤ 3a: æ‰«æé¢‘é“å¡«å……é˜Ÿåˆ—ï¼ˆè‡ªåŠ¨ RSS fallbackï¼‰
curl -X POST https://thoughts-radar-backend-production.up.railway.app/api/automation/scan-channels \
  -H "Content-Type: application/json" \
  -d '{"maxVideosPerChannel": 3, "daysBack": 7}'

# è¿”å›ç¤ºä¾‹ï¼š
# { "method": "rss", "results": { "videosAdded": 5, "channelsScanned": 11 } }

# æ­¥éª¤ 3b: å¤„ç†é˜Ÿåˆ—ç”Ÿæˆå†…å®¹
curl -X POST https://thoughts-radar-backend-production.up.railway.app/api/automation/process-video-queue
```

> **æ™ºèƒ½ Fallback**ï¼šä¼˜å…ˆä½¿ç”¨ YouTube APIï¼Œé…é¢ç”¨å®Œæˆ–å¤±è´¥è‡ªåŠ¨åˆ‡æ¢ RSS  
> **é…é¢èŠ‚çœ**ï¼šRSS æ¨¡å¼æ‰«æ 27 é¢‘é“ä»…éœ€ ~135 å•ä½ï¼ˆå…¨ API éœ€ ~2700 å•ä½ï¼‰

### æ­¥éª¤ 4ï¼šæœ€ç»ˆéªŒè¯
```bash
curl https://thoughts-radar-backend-production.up.railway.app/api/radar/today
```



---

## ğŸ›¡ï¸ å‘å¸ƒå‰è´¨æ£€æ¸…å•ï¼ˆå¿…é¡»å…¨éƒ¨é€šè¿‡ï¼‰

### A. è‡ªåŠ¨éªŒè¯ï¼ˆç”± API æ‰§è¡Œï¼‰
- [x] å†…å®¹é•¿åº¦ â‰¥ 500 å­—ç¬¦
- [x] é¢‘æ®µ ID æœ‰æ•ˆ
- [x] ç«‹åœºä¸º A æˆ– B

### B. äººå·¥éªŒè¯ï¼ˆClaude å¿…é¡»ç¡®è®¤ï¼‰
å‘å¸ƒæ¯æ¡å†…å®¹å‰ï¼ŒClaude å¿…é¡»é€æ¡ç¡®è®¤ï¼š

| æ£€æŸ¥é¡¹ | è¦æ±‚ |
|--------|------|
| **source_url æœ‰æ•ˆ** | é“¾æ¥å¯è®¿é—®ä¸”ä¸ºåŸå§‹æ¥æº |
| **ä½œè€…æƒå¨æ€§** | æ˜¯å¦ä¸ºè¯¥é¢†åŸŸå…¬è®¤çš„æ€æƒ³é¢†è¢–ï¼Ÿ |
| **é¢‘æ®µåˆ†æ•£åº¦** | ä»Šæ—¥å†…å®¹æ˜¯å¦è¦†ç›– 6 å¤§é¢†åŸŸï¼ˆT/P/H/Î¦/R/Fï¼‰å„ 1 æ¡ï¼Ÿ |
| **è§†é¢‘é…é¢** | ä»Šæ—¥æ˜¯å¦æœ‰ 1-2 æ¡ YouTube è§†é¢‘å†…å®¹ï¼Ÿ |
| **å†…å®¹æ·±åº¦** | æ˜¯å¦æœ‰ç»“æ„è§£é‡Šï¼Œè€Œéæ–°é—»æ‘˜è¦ï¼Ÿ |

> âš ï¸ **ä»»ä½•ä¸€é¡¹æœªé€šè¿‡ = ç¦æ­¢å‘å¸ƒ**
> å¦‚ä¸ç¡®å®šï¼Œè¯¢é—®ç”¨æˆ·è€Œéå‡è®¾é€šè¿‡

---

## ğŸ¤– è‡ªåŠ¨åŒ–APIç«¯ç‚¹

### å†…å®¹ç¼ºå£æ£€æŸ¥
```bash
GET /api/automation/content-gap
# è¿”å›: å½“å‰å†…å®¹æ•°é‡ã€ç›®æ ‡æ•°é‡ã€å¯ç”¨é¢‘æ®µ
```

### å¤šæ¥æºæœç´¢è®¡åˆ’
```bash
GET /api/automation/search-plan
# è¿”å›: Web/YouTube/RSS/HNæœç´¢æŸ¥è¯¢åˆ—è¡¨
```

### P2 è§†é¢‘æ‰«æï¼ˆè‡ªåŠ¨ RSS fallbackï¼‰ğŸ†•
```bash
POST /api/automation/scan-channels
# Body: {"maxVideosPerChannel": 3, "daysBack": 7}
# è¿”å›: { "method": "rss|api", "videosAdded": N, "channelsScanned": N }

POST /api/automation/process-video-queue
# è¿”å›: { "processed": N, "failed": N }
```

### æ¯æ—¥ç”Ÿæˆå…¥å£
```bash
POST /api/automation/generate-daily-v2
# è¿”å›: æœç´¢è®¡åˆ’ + æ‰§è¡ŒæŒ‡å—ï¼ˆæ³¨æ„ï¼šåªè¿”å›è®¡åˆ’ï¼Œéœ€æ‰‹åŠ¨æ‰§è¡Œ MCP è°ƒç”¨ï¼‰
```

---

*æœ¬æ–‡ä»¶ä»…å¯¹æ€æƒ³é›·è¾¾é¡¹ç›®ç”Ÿæ•ˆ*
*æœ€åæ›´æ–°ï¼š2026-01-27ï¼ˆP2 è§†é¢‘æ‰«ææœºåˆ¶ï¼šRSS fallback + é…é¢ä¼˜åŒ–ï¼‰*
