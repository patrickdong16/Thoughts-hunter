# 思想雷达 - 需求规格书

> **版本**：v3.2  
> **更新日期**：2026-01-26  
> **状态**：✅ 已确认  
> **规则**：所有需求变更必须先更新本文件

---

## 一、产品定义

### 1.1 产品本质

思想雷达**不是**信息聚合工具，**不是**观点推荐系统。

它是一个**认知基础设施**，用于回答：
- 哪些变化是**噪音**，哪些是**结构性转折**？
- 不同学科的思想，如何在**同一时代压力下**形成对抗？
- 用哪些**长期问题坐标系**（而非热点）来校准判断？

### 1.2 核心目标

> 在文明不稳定期，持续追踪**哪些结构正在断裂、哪些价值正在被重估、哪些方向仍值得长期押注**

### 1.3 目标用户

高认知密度用户 / 科技投资人 / 长期判断者

---

## 二、设计原则

### 2.1 六大知识领域

| 领域 | 判断什么 |
|------|----------|
| 技术 | 人类是否正在失控 |
| 政治 | 为什么还要服从 |
| 历史 | 我们是不是走在老路上 |
| 哲学 | 价值冲突如何取舍 |
| 宗教 | 秩序最后靠什么维持 |
| 金融 | 未来是否仍被相信 |

### 2.2 时代级问题标准（三不可）

| 原则 | 说明 |
|------|------|
| **不可兼得** | A/B 必然冲突 |
| **不可回避** | 现实每天都在逼迫回答 |
| **不可轻易解决** | 至少 10-20 年有效 |

---

## 三、频段系统（19 个）

### 3.1 技术 (T) - 3 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| T1 | AI 是否正在重写社会分层？ | 普惠化，能力上移 | 精英化，阶层断裂 |
| T2 | 技术是嵌入制度还是绕开制度？ | 可被制度吸收 | 天然反制度 |
| T3 | 技术是否已脱离人类集体意志？ | 仍可被伦理引导 | 已成竞争宿命 |

### 3.2 政治 (P) - 3 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| P1 | 民主是否已不适应高复杂度社会？ | 低效但不可替代 | 技术官僚更现实 |
| P2 | 权力是否正在脱离公共可见性？ | 仍可拉回公共领域 | 已进入后政治治理 |
| P3 | 自由社会能否对抗反自由力量？ | 有自我修复能力 | 正被系统性削弱 |

### 3.3 历史 (H) - 3 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| H1 | 历史是否正在重演？ | 周期可被打破 | 规律不可抗拒 |
| H2 | 文明冲突是否主导世界？ | 可对话融合 | 冲突是必然 |
| H3 | 帝国是否正在回归？ | 多极秩序可稳定 | 新帝国正在形成 |

### 3.4 哲学 (Φ) - 4 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| Φ1 | 自由意志是否仍然存在？ | 人类保有选择能力 | 自由意志是幻觉 |
| Φ2 | 意识能否被技术复制？ | 有不可还原性 | 可被计算模拟 |
| Φ3 | AI 是否会拥有道德地位？ | AI 只是工具 | 可能成为道德主体 |
| Φ4 | 价值是主观还是客观的？ | 存在普世价值 | 完全是建构的 |

### 3.5 宗教 (R) - 3 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| R1 | 宗教是否仍能提供意义？ | 不可替代的意义来源 | 世俗化不可逆转 |
| R2 | 科学与信仰能否共存？ | 各有领域 | 科学终将取代信仰 |
| R3 | 技术是否正在成为新宗教？ | 技术崇拜是暂时的 | 技术乌托邦正在兴起 |

### 3.6 金融 (F) - 3 个

| 频段 | 核心问题 | A 极 | B 极 |
|------|----------|------|------|
| F1 | 加密货币是否会重塑金融秩序？ | 是泡沫 | 去中心化是未来 |
| F2 | UBI 是否必要？ | 市场仍能解决就业 | AI 将导致大规模失业 |
| F3 | ESG 是否只是营销？ | 是真实的价值转向 | 是资本的伪装 |

---

## 四、内容来源体系

### 4.1 文字来源

**A. 权威与共识的筛选机制**
- 各国权威榜单/奖项
- 权威媒体深度栏目
- 高质量出版社与机构推荐
- 非虚构为主，强调严肃性、人文性与论证结构

**B. 顶级头脑的原始表达（当代与历史）**
- 书籍（作者本人作品优先）
- 深度文章与长评论（NYT、FT、Foreign Affairs 等）

### 4.2 视频来源

- YouTube 频道
- 长访谈 / 演讲 / 播客

> 详细来源清单见 [CONTENT_SOURCES.md](./CONTENT_SOURCES.md)

### 4.3 信息提炼要求

1. 对现实有**解释力**、能进入命题对照的思想材料
2. 不仅是"新闻事实"，而是对事实背后的**结构解释、理论框架与价值冲突**的表达

### 4.4 多来源自动化采集

> **状态**：✅ 已实现 (2026-01-26)

#### 4.4.1 支持的内容来源

| 优先级 | 来源类型 | 说明 | MCP工具 |
|--------|----------|------|---------|
| 1 | Web搜索 | 核心人物最新演讲/访谈/文章 | `search_web` |
| 2 | YouTube | 目标频道视频+字幕 | `youtube-transcript` |
| 3 | RSS订阅 | 思想类杂志/博客 | `rss-reader` |
| 4 | HN | 技术/哲学热门讨论 | `hackernews` |

#### 4.4.2 RSS订阅源

| 名称 | 领域 |
|------|------|
| Aeon | 哲学/思想 |
| Foreign Affairs | 政治/国际 |
| The Atlantic | 政治/文化 |
| MIT Technology Review | 技术 |
| The Economist | 金融/政治 |

#### 4.4.3 自动化API端点

| 端点 | 用途 |
|------|------|
| `GET /api/automation/content-gap` | 查看当日内容缺口 |
| `GET /api/automation/search-plan` | 获取多来源搜索计划 |
| `POST /api/automation/generate-daily-v2` | 多来源生成入口 |

#### 4.4.4 调度规则

- 定时执行：北京时间 **04:00**
- Cron: `0 20 * * *` (UTC)
- 配置文件：`railway.json`

---

## 五、内容发布规则

### 5.1 普通日（🔵 Regular Day）

| 项目 | 要求 |
|------|------|
| 每日数量 | 6-8 条 |
| 频段分布 | 6 大领域各至少 1 条 |
| **频段限制** | **每频段至少 1 条（保证领域覆盖）** |
| 正文字数 | ≥ 500 可见字符 |
| 视频内容 | 1-2 条/天 |
| 视频时长 | ≥ 40 分钟 |
| 来源多样性 | 不同作者、不同媒体 |

### 5.2 主题日（🔴 Theme Day）

**触发条件**：达沃斯、G20、APEC、联合国大会、CES、诺贝尔周等重大活动

| 项目 | 要求 |
|------|------|
| 每日数量 | **10-12 条** |
| 最低要求 | **10 条** |
| 频段限制 | 解除（不要求均衡覆盖，每频段不限） |
| 视频限制 | 解除（可全部为视频） |
| 视频时长 | ≥ 20 分钟 |
| **100% 主题聚焦** | 只收录主题活动现场内容 |
| **领袖资格** | 必须是各领域公认领袖 |
| **配置文件** | `backend/config/day-config.json` |
| **主题日 Banner** | 在今日页面顶部显示主题名称 |

### 5.3 内容质量要求（严格执行）

#### 5.3.1 字数要求

| 项目 | 要求 | 验证方式 |
|------|------|----------|
| 正文字数 | **≥ 500 可见字符** | `countVisibleChars()` 统一计数 |
| 标题长度 | 10-100 字 | 自动校验 |

> **可见字符计数**：排除换行符和多余空格，只计算实际显示的字符  
> 验证模块：`backend/utils/char-count.js` 和 `mobile/services/char-count.js`

#### 5.3.2 零重复规则

| 规则 | 说明 | 验证方式 |
|------|------|----------|
| URL 唯一 | 同一 source_url 不能出现两次 | 数据库唯一约束 |
| 视频ID 唯一 | 同一 YouTube 视频不能重复 | 提取 video_id 校验 |
| 标题去重 | 相似度 ≥ 80% 阻断 | 算法检测 + 人工确认 |

#### 5.3.3 来源真实性（零虚构容忍）

| 禁止行为 | 说明 |
|----------|------|
| 虚构 URL | source_url 必须是真实可访问的链接 |
| 虚构作者 | author_name 必须是真实存在的人物 |
| 虚构日期 | 发布日期必须与原始内容一致 |
| 虚构引用 | 正文中的引用必须来自真实来源 |
| 编造来源 | 禁止编造不存在的文章/视频/书籍 |

**验证要求**：
- source_url 不能为空
- source_url 必须是有效的 HTTP(S) 链接

#### 5.3.4 内容质量标准

| 标准 | 说明 |
|------|------|
| **结构解释** | 不是新闻摘要，而是对事实背后结构的解释 |
| **理论框架** | 必须呈现某种分析框架或思想模型 |
| **价值冲突** | 必须体现 A/B 两极的张力 |
| **命题对照** | 能与频段的核心问题形成对照 |

#### 5.3.5 频段匹配

| 规则 | 说明 |
|------|------|
| 频段相关性 | 内容必须与所选频段的核心问题相关 |
| 立场一致性 | stance (A/B) 必须与内容实际观点一致 |
| 禁止错配 | 技术内容不能放政治频段，反之亦然 |

### 5.4 质检清单（发布前必查）

- [ ] 正文 ≥ 700 字
- [ ] source_url 是真实有效链接
- [ ] 作者是真实人物
- [ ] URL 未重复（系统自动检查）
- [ ] 标题未重复（系统自动检查）
- [ ] 频段选择正确
- [ ] A/B 立场与内容一致
- [ ] 内容有结构解释，不是简单新闻摘要

---

## 六、功能需求

### 6.1 后端 API

| 功能 | 状态 |
|------|------|
| 雷达数据 CRUD | ✅ |
| 频段管理 | ✅ |
| TTI 更新 | ✅ |
| 用户收藏 | ✅ |
| 用户立场 | ✅ |
| 用户认证 | ✅ |

### 6.2 CMS 管理系统

| 功能 | 状态 |
|------|------|
| 内容列表（按日期分组） | ✅ |
| 添加/编辑/删除内容 | ✅ |
| 字数验证（≥700） | ⏳ 需更新 |
| 每日数量提示 | ✅ |
| 频段覆盖检查 | ✅ |
| 频段 TTI 管理 | ✅ |
| URL 重复检查 | ⏳ 需实现 |
| 标题相似度检查 | ⏳ 需实现 |

### 6.3 移动端 APP

| 功能 | 状态 |
|------|------|
| 今日雷达页面 | ✅ |
| 领域筛选器 | ✅ |
| 卡片展开/收起 | ✅ |
| 收藏功能 | ✅ |
| 立场表态（A/B） | ✅ |
| 张力指数页面（TTI 光谱） | ✅ |
| 历史记录页面 | ✅ |
| 个人中心 | ✅ |
| 离线缓存 | ✅ |
| 登录/注册 | ✅ |
| ~~下拉刷新~~ | ❌ 已取消 |

### 6.4 待开发功能

| 功能 | 优先级 |
|------|--------|
| 搜索功能 | P1 |
| 推送通知 | P2 |
| 分享功能 | P2 |
| 来源质量排名 | P2 |
| 人物热度追踪 | P2 |
| 评论系统 | P3 |

---

## 七、数据模型

### 7.1 频段表 (bands)

| 字段 | 说明 |
|------|------|
| id | 频段ID（T1, P1, H1, Φ1, R1, F1...） |
| domain | 领域 |
| core_question | 核心问题 |
| pole_a / pole_b | A/B 两极描述 |
| tti | 张力指数（0-100） |

### 7.2 雷达条目表 (radar_items)

| 字段 | 约束 |
|------|------|
| date | 发布日期 |
| band_id | 关联频段 |
| stance | A 或 B |
| title | 标题 |
| author_name / author_title | 作者信息 |
| source / source_url | 出处（**必须真实**） |
| content | 正文（**≥700字**） |
| tension_question / tension_a / tension_b | 张力信息 |

### 7.3 用户行为表 (user_actions)

| 字段 | 说明 |
|------|------|
| user_id | 用户标识 |
| item_id | 关联雷达条目 |
| action_type | like / stance |
| action_value | true / A / B |

---

## 八、运维约束

| 约束 | 说明 |
|------|------|
| 环境分离 | 本地/线上数据库**必须分离** |
| 部署前确认 | 必须确认当前连接的数据库环境 |
| 定时任务 | 必须有日志、失败通知、超时设置 |
| 网络请求 | 必须有 timeout(10s) 和重试(3次) |
| 密钥管理 | 禁止硬编码，使用环境变量 |

---

## 九、相关文档

| 文档 | 内容 |
|------|------|
| CLAUDE.md | AI 开发规则（强制遵守） |
| CONTENT_SOURCES.md | YouTube 频道、人物名单、出版物清单 |
| LOCAL_SETUP.md | 本地启动指南 |
| DEPLOY.md | 部署指南 |
| CHECKLIST.md | 测试清单 |

---

## 十、变更记录

| 日期 | 变更 |
|------|------|
| 2026-01-25 | v3.1 - 增强质检规则（5.3-5.4），新增 CLAUDE.md |
| 2026-01-25 | v3.0 - 精简重构，正文≥700字，主题日15-20条，取消下拉刷新 |
| 2026-01-25 | v2.0 - 整合原始 PRD |

---

*本文件是思想雷达项目的唯一需求来源*
